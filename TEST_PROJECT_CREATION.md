# Project Creation Test Guide

## **‚úÖ YES! Managers CAN Create Projects Successfully**

**Answer to your question:** **YES**, managers can create projects successfully through the API without any manual coding in the schema. The system is fully functional for dynamic project creation.

## **üîß How Project Creation Works:**

### **1. API Endpoint Available:**
```
POST /api/projects
```

### **2. Authorization:**
- **MANAGER** and **ADMIN** roles can create projects
- Uses `@PreAuthorize("hasAnyRole('ADMIN', 'MANAGER')")` annotation

### **3. Required Fields:**
```json
{
  "name": "Project Name (required)",
  "description": "Project Description (optional)",
  "priority": "LOW|MEDIUM|HIGH|CRITICAL (required)",
  "dueDate": "2024-01-15 (required, must be future date)"
}
```

### **4. Automatic Features:**
- **ID Generation**: Auto-generated by database
- **Status**: Automatically set to `IN_PROGRESS`
- **Created At**: Automatically timestamped
- **Database Storage**: Saved to persistent H2 database

## **üöÄ Test Project Creation:**

### **Step 1: Login as Manager**
```powershell
# Login as Test Manager
$body = @{
    email = "test@karooth.com"
    password = "password123"
} | ConvertTo-Json

$response = Invoke-RestMethod -Uri "http://localhost:8080/api/auth/login" -Method POST -Body $body -ContentType "application/json"
$token = $response.token
Write-Host "JWT Token: $token"
```

### **Step 2: Create a New Project**
```powershell
$headers = @{
    "Authorization" = "Bearer $token"
    "Content-Type" = "application/json"
}

$projectData = @{
    name = "New Test Project"
    description = "This is a test project created via API"
    priority = "HIGH"
    dueDate = "2024-02-15"
} | ConvertTo-Json

$newProject = Invoke-RestMethod -Uri "http://localhost:8080/api/projects" -Method POST -Headers $headers -Body $projectData
Write-Host "Created Project: $($newProject | ConvertTo-Json -Depth 3)"
```

### **Step 3: Verify Project Was Created**
```powershell
# Get all projects to see the new one
$projects = Invoke-RestMethod -Uri "http://localhost:8080/api/projects" -Method GET -Headers $headers
Write-Host "All Projects: $($projects | ConvertTo-Json -Depth 3)"
```

### **Step 4: Check Database Persistence**
```powershell
# Restart server and check if project still exists
# 1. Stop server (Ctrl+C)
# 2. Restart server: ./gradlew bootRun
# 3. Login again and check projects
$projects = Invoke-RestMethod -Uri "http://localhost:8080/api/projects" -Method GET -Headers $headers
Write-Host "Projects after restart: $($projects | ConvertTo-Json -Depth 3)"
```

## **üìä Expected Results:**

### **Successful Project Creation Response:**
```json
{
  "id": 6,
  "name": "New Test Project",
  "description": "This is a test project created via API",
  "createdAt": "2024-01-13T10:30:00"
}
```

### **Database Entry Created:**
- **ID**: Auto-generated (6, 7, 8, etc.)
- **Name**: "New Test Project"
- **Description**: "This is a test project created via API"
- **Priority**: HIGH
- **Status**: IN_PROGRESS (default)
- **Due Date**: 2024-02-15
- **Created At**: Current timestamp

## **üîç Verification Methods:**

### **1. API Check:**
```powershell
# Get specific project by ID
Invoke-RestMethod -Uri "http://localhost:8080/api/projects/6" -Method GET -Headers $headers
```

### **2. H2 Console Check:**
1. Open: `http://localhost:8080/h2-console`
2. Connect with: `jdbc:h2:file:./data/taskmanager`
3. Run: `SELECT * FROM projects ORDER BY id DESC LIMIT 5;`

### **3. Database Status Check:**
```powershell
Invoke-RestMethod -Uri "http://localhost:8080/api/auth/database-full-status" -Method GET
```

## **üéØ Key Points:**

### **‚úÖ What Works:**
- **Dynamic Creation**: No manual schema coding needed
- **Role-Based Access**: Only MANAGER/ADMIN can create
- **Validation**: Required fields, future dates, valid priorities
- **Persistence**: Projects saved to database file
- **Auto-Generation**: IDs, timestamps, default status
- **RESTful API**: Standard HTTP POST method

### **‚úÖ Database Integration:**
- **JPA/Hibernate**: Automatic entity mapping
- **Repository Pattern**: Clean data access
- **Transaction Management**: ACID compliance
- **Foreign Key Support**: Can link to tasks later

### **‚úÖ Security:**
- **JWT Authentication**: Token-based access
- **Role Authorization**: MANAGER/ADMIN only
- **Input Validation**: Prevents invalid data
- **SQL Injection Protection**: Parameterized queries

## **üîß Error Handling:**

### **Common Errors & Solutions:**

**1. 403 Forbidden:**
```json
{
  "error": "Access Denied"
}
```
**Solution:** Ensure user has MANAGER or ADMIN role

**2. 400 Bad Request:**
```json
{
  "error": "Due date must be in the future"
}
```
**Solution:** Use a future date

**3. 400 Bad Request:**
```json
{
  "error": "Priority is required"
}
```
**Solution:** Include priority field

## **üöÄ Advanced Features:**

### **Project Updates:**
```powershell
$updateData = @{
    name = "Updated Project Name"
    status = "COMPLETED"
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:8080/api/projects/6" -Method PUT -Headers $headers -Body $updateData
```

### **Project Deletion:**
```powershell
Invoke-RestMethod -Uri "http://localhost:8080/api/projects/6" -Method DELETE -Headers $headers
```

### **Project Statistics:**
```powershell
Invoke-RestMethod -Uri "http://localhost:8080/api/projects/statistics" -Method GET -Headers $headers
```

## **‚úÖ Conclusion:**

**YES, managers can absolutely create projects successfully without any manual coding!** The system provides:

1. **Full API Support** for project CRUD operations
2. **Role-Based Authorization** (MANAGER/ADMIN only)
3. **Automatic Database Integration** with persistence
4. **Input Validation** and error handling
5. **RESTful Design** following best practices

The project creation is **completely dynamic** and **database-driven** - no manual schema modifications needed! üéâ
